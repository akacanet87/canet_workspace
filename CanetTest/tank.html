<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>tank</title>


<style>

#mask{

	overflow : hidden;
	border : 1px solid red;


}


</style>

<script src="./GameProcess.js"></script>
<script src="./Windows.js"></script>
<script src="./SelectBox.js"></script>
<script src="./TankFn.js"></script>
<script src="./BulletFn.js"></script>
<script src="./GameFn.js"></script>
<script src="./MapFn.js"></script>
<script src="./Tanks.js"></script>
<script src="./Maps.js"></script>
<script src="./Items.js"></script>
<script src="./SignIn.js"></script>

<script>

var wrapper;
var map;

var s_wid=1240;
var s_hei=900;


//	창 관련 div 선언
var startWin;
var noticeWin;
var logIn;
var selectMode;
var selectContents;
var itemShop;
var loadGame;
var gameRank;
var gameWinner;


// map들 선언
var overTheCloudMap= new overTheCloudMap();
var onThePlanetMap= new onThePlanetMap();
var theRuinedCityMap= new theRuinedCityMap();
var theNightMap= new theNightMap();
var theCastleMap= new theCastleMap();


// tank들 선언
var laserTank= new laserTank();
var octopusTank= new octopusTank();
var starTank= new starTank();
var missileTank= new missileTank();
var cannonTank= new cannonTank();


//	item들 선언
var itemFixHp;
var itemDoubleShot;
var itemSuperBullet;
var itemMoveTank;



// 각 거푸집 선언
var tankFn;
var mapFn;
var itemFn;
var tankMove;
var bulletFn;


var side=true;

var isStartWin;
var isLogIn;
var isNoticeWin;
var isSelectMode;
var isSelectContents;
var isItemShop;
var isLoadGame;
var isGameWinner;


var blockArr = new Array();

var mapLeft;
var mapTop;


var birthX=10;
var birthY=10;
var tankWidth=70;
var tankHeight=70;
var velX=0;
var velY=0;
var gravity=0.1;
var shotPw=0;

var speed=0;

var count=1;

var key;



window.addEventListener("load", function(){

	init();

});

function init(){

	
	wrapper = document.getElementById("wrapper");
	mask = document.getElementById("mask");
	map = document.createElement("div");
	gameWin = document.createElement("div");
	
	mask.style.width=1240+"px";
	mask.style.height=900+"px";
	mask.style.margin="auto";

	map.style.width=3000+"px";
	map.style.height=2000+"px";
	map.style.position="relative";

	gameWin.style.width=1240+"px";
	gameWin.style.height=900+"px";
	gameWin.style.position="relative";

	//moveMap();

	

/*
	n_win = new noticeWin( map, s_wid, s_hei );

	n_win.init();

*/	


/*

	sel_mode = new selectMode( mask, gameWin, s_wid, s_hei);

	sel_mode.init();




	sel_con = new selectContents( mask, gameWin, s_wid, s_hei );

	sel_con.init();

*/


	gameProcess();



	//tankFn = new tankFn(map, birthX, birthY, tankWidth, tankHeight, velX, velY, gravity, laserTank.distance, laserTank.fireAngle, laserTank.defense, laserTank.hp);

	//tankFn.init();

	//mapFn = new mapFn( map, blockArr, overTheCloudMap.bgSrc, overTheCloudMap.bgmSrcS, overTheCloudMap.blockImg );

	//mapFn.init();

	

}



window.addEventListener("keydown", function(){

	key=event.keyCode;

	switch(key){
		
		case 32:

			if( count==1 ){

				tankMove(0);

				bulletFn = new bulletFn(map, tankFn.x, tankFn.y, gravity, 5, 5, side, laserTank.bulletImg1, laserTank.bulletImg2, laserTank.damage1, laserTank.damage2);
	
				bulletFn.init();

				count--;

			}
			
			break;//스페이스바
		
		case 37:

			side=false;

			if( count==1 ){

				tankMove(-2);

			}

			tankFn.img.style.transform="rotateY(180deg)";
			
			break;
		
		case 39:

			side=true;

			if( count==1 ){

				tankMove(2);

			}

			tankFn.img.style.transform="rotateY(0deg)";
			
			break;

	}

});


window.addEventListener("keyup", function(){

	key=event.keyCode;

	if(key==37 || key==39){
		
		tankFn.velX=0;
		
		speed=0;
		
	}

});



var gameProcess = function(){

	startWin = new startWin(mask, gameWin, s_wid, s_hei);
	logIn = new logIn(mask, gameWin, s_wid, s_hei);
	noticeWin = new noticeWin(mask, gameWin, s_wid, s_hei);
	selectMode = new selectMode(mask, gameWin, s_wid, s_hei);
	selectContents = new selectContents(mask, gameWin, s_wid, s_hei);
	itemShop = new itemShop(mask, gameWin, s_wid, s_hei);
	loadGame = new loadGame(mask, gameWin, s_wid, s_hei);
	gameWinner = new gameWinner(mask, gameWin, s_wid, s_hei);

	isStartWin=true;
	isLogIn=false;
	isNoticeWin=false;
	isSelectMode=false;
	isSelectContents=false;
	isItemShop=false;
	isLoadGame=false;
	isGameWinner=false;

	startWin.init();

	if( isStartWin ){
		
		window.addEventListener("click", function(){

			startWin.clear();
			
			isStartWin=false;
			
			isLogIn=true;

		}

	}

}


/*
	if( isStartWin ){

		startWin.init();

		window.addEventListener("click", function(){

			startWin.clear();

			logIn.init();
			
			isStartWin=false;
			
			isLogIn=true;

			
			if( isLogIn ){

				logIn.btLogIn.addEventListener("click", function(){

				if( logIn.idBox.value=="" ){

					alert("아이디를 입력해야지!!");
					
					logIn.idBox.focus();

					return;

				}else if( logIn.pwBox.value=="" ){

					alert("패스워드는 왜 빼먹어?");
					
					logIn.idBox.focus();

					return;

				}else{

					logIn.clear();

					noticeWin.init();

					isLogIn=false;

					isNoticeWin=true;

				}
	
				if( isNoticeWin ){

					noticeWin.btBack.addEventListener("click", function(){

						noticeWin.clear();

						logIn.init();

						isNoticeWin=false;

						isLogIn=true;

					});

					noticeWin.btStart.addEventListener("click", function(){

						noticeWin.clear();

						selectMode.init();

						isNoticeWin=false;

						isSelectMode=true;

					});

				}

			});

			}

		});

	}

}


				}else if(isSelectMode ){

				}else if( isSelectContents ){

				}else if( isItemShop ){

				}else if( isLoadGame ){

				}else if( isGameWinner ){

				}

			}

*/
		/*

		logIn.btLogIn.addEventListener("click", function(){

			if( isLogIn ){

				if( logIn.idBox.value=="" ){

					alert("아이디를 입력해야지!!");
					
					logIn.idBox.focus();

					return;

				}else if( logIn.pwBox.value=="" ){

					alert("패스워드는 왜 빼먹어?");
					
					logIn.idBox.focus();

					return;

				}else{

					logIn.clear();

					noticeWin.init();

					isLogIn=false;

				}

			}


			noticeWin.btBack.addEventListener("click", function(){

				noticeWin.clear();

				logIn.init();

				isNoticeWin=false;

				isLogIn=true;

			});

			noticeWin.btStart.addEventListener("click", function(){

				if( isNoticeWin ){

					noticeWin.clear();

					selectMode.init();

					isNoticeWin=false;

				}
			
			});
		
		});

	});	

}

*/

/*


function moveMap(){

	window.addEventListener("mousemove", function(){

		entX=event.clientX;
		entY=event.clientY;

		var x=10;
		

		while( entX > 1240 ){

			mapLeft-=x;

			map.style.left=-mapLeft+"px";
			map.style.top=-100+"px";

			return;

		}

	});

}

*/

</script>



 </head>
 <body>

<div id="wrapper">

	<div id="mask">

		<div id="map"></div>
	
	</div>

</div>
  
 </body>
</html>
